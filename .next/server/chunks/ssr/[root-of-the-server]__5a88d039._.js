module.exports=[81805,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(73679),g=a.i(11705),h=a.i(96465),i=a.i(41910),j=b([g,h]);function k({type:a,onClose:b}){let c=(0,i.useRouter)();return(0,e.useEffect)(()=>{let a=Date.now()+3e3,b=()=>{Date.now()<a&&requestAnimationFrame(b)};b()},[]),(0,d.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,d.jsxs)(g.Card,{className:"max-w-md w-full p-8 text-center",children:[(0,d.jsx)(f.CheckCircle,{className:"w-20 h-20 text-green-500 mx-auto mb-4"}),(0,d.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"donation"===a?"Thank You!":"Welcome to Pro!"}),(0,d.jsx)("p",{className:"text-gray-600 mb-6",children:"donation"===a?"Your donation has been processed successfully. You're helping reunite families with their belongings!":"Your Pro subscription is now active. Enjoy full access to AI scanning, analytics, and priority support!"}),(0,d.jsxs)("div",{className:"flex gap-3",children:[(0,d.jsx)(h.Button,{onClick:()=>c.push("/profile"),className:"flex-1 bg-[#315E47] hover:bg-[#1C2E25]",children:"View Profile"}),(0,d.jsx)(h.Button,{onClick:b||(()=>c.push("/")),variant:"outline",className:"flex-1",children:"Continue"})]})]})})}[g,h]=j.then?(await j)():j,a.s(["PaymentSuccess",()=>k]),c()}catch(a){c(a)}},!1),24535,a=>a.a(async(b,c)=>{try{let b=await a.y("@radix-ui/react-alert-dialog");a.n(b),c()}catch(a){c(a)}},!0),18661,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(24535),g=a.i(57949),h=a.i(33991),i=b([f,g,h]);[f,g,h]=i.then?(await i)():i;let j=f.Root,k=f.Trigger,l=f.Portal,m=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.Overlay,{className:(0,g.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...b,ref:c}));m.displayName=f.Overlay.displayName;let n=e.forwardRef(({className:a,...b},c)=>(0,d.jsxs)(l,{children:[(0,d.jsx)(m,{}),(0,d.jsx)(f.Content,{ref:c,className:(0,g.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...b})]}));n.displayName=f.Content.displayName;let o=({className:a,...b})=>(0,d.jsx)("div",{className:(0,g.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...b});o.displayName="AlertDialogHeader";let p=({className:a,...b})=>(0,d.jsx)("div",{className:(0,g.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...b});p.displayName="AlertDialogFooter";let q=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.Title,{ref:c,className:(0,g.cn)("text-lg font-semibold",a),...b}));q.displayName=f.Title.displayName;let r=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.Description,{ref:c,className:(0,g.cn)("text-sm text-muted-foreground",a),...b}));r.displayName=f.Description.displayName;let s=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.Action,{ref:c,className:(0,g.cn)((0,h.buttonVariants)(),a),...b}));s.displayName=f.Action.displayName;let t=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.Cancel,{ref:c,className:(0,g.cn)((0,h.buttonVariants)({variant:"outline"}),"mt-2 sm:mt-0",a),...b}));t.displayName=f.Cancel.displayName,a.s(["AlertDialog",()=>j,"AlertDialogAction",()=>s,"AlertDialogCancel",()=>t,"AlertDialogContent",()=>n,"AlertDialogDescription",()=>r,"AlertDialogFooter",()=>p,"AlertDialogHeader",()=>o,"AlertDialogTitle",()=>q,"AlertDialogTrigger",()=>k]),c()}catch(a){c(a)}},!1),93330,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(48896),g=a.i(33991),h=a.i(39942),i=a.i(76575),j=a.i(20740),k=a.i(67378),l=a.i(8191),m=a.i(41767),n=a.i(66999),o=a.i(56091),p=a.i(75794),q=a.i(23028),r=a.i(39113),s=a.i(14619),t=a.i(34637),u=a.i(81462),v=a.i(81805),w=a.i(41910),x=a.i(18661),y=b([g,h,i,j,k,m,v,x]);function z(){var a;let{profile:b,updateProfile:c}=(0,f.useAuth)(),y=(0,w.useRouter)(),[z,A]=(0,e.useState)(""),[B,C]=(0,e.useState)(""),[D,E]=(0,e.useState)(""),[F,G]=(0,e.useState)(!1),[H,I]=(0,e.useState)([]),[J,K]=(0,e.useState)(!0),[L,M]=(0,e.useState)(!1),[N,O]=(0,e.useState)("donation"),{toast:P}=(0,l.useToast)();(0,e.useEffect)(()=>{},[y,P]),(0,e.useEffect)(()=>{b&&(A(b.full_name||""),C(b.phone||""),E(b.address||""),Q())},[b]);let Q=async()=>{try{let{data:a,error:c}=await u.supabase.from("donations").select("*").eq("user_id",b?.id).eq("status","completed").order("created_at",{ascending:!1}).limit(10);if(c)throw c;I(a||[])}catch(a){console.error("Error fetching donations:",a)}finally{K(!1)}},R=H.reduce((a,b)=>a+Number(b.amount),0),S=H.filter(a=>a.is_recurring&&"active"===a.subscription_status).reduce((a,b)=>(a.find(a=>a.stripe_subscription_id===b.stripe_subscription_id)||a.push(b),a),[]),T=async a=>{try{let{error:b}=await u.supabase.functions.invoke("cancel-subscription",{body:{subscriptionId:a}});if(b)throw b;P({title:"Subscription Canceled",description:"Your recurring donation has been canceled."}),Q()}catch(a){P({title:"Error",description:a.message,variant:"destructive"})}},U=async a=>{a.preventDefault(),G(!0);try{await c({full_name:z,phone:B,address:D}),P({title:"Success!",description:"Your profile has been updated."})}catch(a){P({title:"Error",description:a.message,variant:"destructive"})}finally{G(!1)}};return(0,d.jsxs)("div",{className:"min-h-screen flex flex-col",children:[L&&(0,d.jsx)(v.PaymentSuccess,{type:N,onClose:()=>M(!1)}),(0,d.jsx)(m.default,{}),(0,d.jsx)("main",{className:"flex-1 container mx-auto px-4 py-12",children:(0,d.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,d.jsxs)(j.Card,{children:[(0,d.jsxs)(j.CardHeader,{children:[(0,d.jsx)(j.CardTitle,{children:"Account Overview"}),(0,d.jsx)(j.CardDescription,{children:"Your ReFURRM membership details"})]}),(0,d.jsxs)(j.CardContent,{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(i.Label,{className:"text-sm text-gray-600",children:"Role"}),(0,d.jsx)("div",{className:"mt-1",children:(a=>{switch(a){case"ambassador":return(0,d.jsxs)(k.Badge,{className:"bg-gradient-to-r from-[#315E47] to-[#50E3E3] text-white",children:[(0,d.jsx)(o.Crown,{className:"w-3 h-3 mr-1"}),"Ambassador"]});case"admin":return(0,d.jsxs)(k.Badge,{className:"bg-red-600",children:[(0,d.jsx)(o.Crown,{className:"w-3 h-3 mr-1"}),"Admin"]});case"buyer":return(0,d.jsxs)(k.Badge,{className:"bg-blue-600",children:[(0,d.jsx)(p.Zap,{className:"w-3 h-3 mr-1"}),"Buyer"]});case"volunteer":return(0,d.jsxs)(k.Badge,{className:"bg-green-600",children:[(0,d.jsx)(q.Users,{className:"w-3 h-3 mr-1"}),"Volunteer"]});case"family":return(0,d.jsxs)(k.Badge,{className:"bg-primary-600",children:[(0,d.jsx)(q.Users,{className:"w-3 h-3 mr-1"}),"Family"]});default:return(0,d.jsx)(k.Badge,{children:a})}})(b?.role||"")})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(i.Label,{className:"text-sm text-gray-600",children:"Subscription Plan"}),(0,d.jsx)("div",{className:"mt-1",children:(a=b?.subscription_tier,"pro"===a?(0,d.jsx)(k.Badge,{className:"bg-[#50E3E3] text-white",children:"Pro - $29/month"}):(0,d.jsx)(k.Badge,{variant:"outline",children:"Community - Free"}))})]})]}),b?.role==="ambassador"&&(0,d.jsx)("div",{className:"p-4 bg-gradient-to-r from-emerald-50 to-teal-50 rounded-lg border border-emerald-200",children:(0,d.jsxs)("p",{className:"text-sm text-emerald-800",children:[(0,d.jsx)(o.Crown,{className:"w-4 h-4 inline mr-1"}),"You are an approved Ambassador with access to leadership tools and rescue coordination features."]})})]})]}),(0,d.jsxs)(j.Card,{children:[(0,d.jsxs)(j.CardHeader,{children:[(0,d.jsx)(j.CardTitle,{children:"Profile Settings"}),(0,d.jsx)(j.CardDescription,{children:"Manage your personal information"})]}),(0,d.jsx)(j.CardContent,{children:(0,d.jsxs)("form",{onSubmit:U,className:"space-y-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(i.Label,{htmlFor:"email",children:"Email"}),(0,d.jsx)(h.Input,{id:"email",value:b?.email||"",disabled:!0})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(i.Label,{htmlFor:"fullName",children:"Full Name"}),(0,d.jsx)(h.Input,{id:"fullName",value:z,onChange:a=>A(a.target.value)})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(i.Label,{htmlFor:"phone",children:"Phone"}),(0,d.jsx)(h.Input,{id:"phone",type:"tel",value:B,onChange:a=>C(a.target.value)})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(i.Label,{htmlFor:"address",children:"Address"}),(0,d.jsx)(h.Input,{id:"address",value:D,onChange:a=>E(a.target.value)})]}),(0,d.jsx)(g.Button,{type:"submit",disabled:F,children:F?"Saving...":"Save Changes"})]})})]}),S.length>0&&(0,d.jsxs)(j.Card,{children:[(0,d.jsxs)(j.CardHeader,{children:[(0,d.jsxs)(j.CardTitle,{className:"flex items-center gap-2",children:[(0,d.jsx)(s.Calendar,{className:"w-5 h-5 text-blue-500"}),"Recurring Donations"]}),(0,d.jsx)(j.CardDescription,{children:"Manage your automatic monthly or annual donations"})]}),(0,d.jsx)(j.CardContent,{children:(0,d.jsx)("div",{className:"space-y-4",children:S.map(a=>(0,d.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gradient-to-r from-blue-50 to-primary-50 rounded-lg border border-blue-200",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("p",{className:"font-bold text-lg text-[#315E47]",children:["$",Number(a.amount).toFixed(2)," / ","monthly"===a.frequency?"month":"year"]}),(0,d.jsxs)("p",{className:"text-sm text-gray-600",children:["Started ",new Date(a.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),(0,d.jsx)(k.Badge,{className:"mt-2 bg-green-100 text-green-700 border-green-300",children:"Active"})]}),(0,d.jsxs)(x.AlertDialog,{children:[(0,d.jsx)(x.AlertDialogTrigger,{asChild:!0,children:(0,d.jsxs)(g.Button,{variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:[(0,d.jsx)(t.X,{className:"w-4 h-4 mr-1"}),"Cancel"]})}),(0,d.jsxs)(x.AlertDialogContent,{children:[(0,d.jsxs)(x.AlertDialogHeader,{children:[(0,d.jsx)(x.AlertDialogTitle,{children:"Cancel Recurring Donation?"}),(0,d.jsxs)(x.AlertDialogDescription,{children:["Are you sure you want to cancel this $",Number(a.amount).toFixed(2)," ",a.frequency," donation? You can always set up a new recurring donation later."]})]}),(0,d.jsxs)(x.AlertDialogFooter,{children:[(0,d.jsx)(x.AlertDialogCancel,{children:"Keep Donation"}),(0,d.jsx)(x.AlertDialogAction,{onClick:()=>T(a.stripe_subscription_id),className:"bg-red-600 hover:bg-red-700",children:"Cancel Donation"})]})]})]})]},a.id))})})]}),(0,d.jsxs)(j.Card,{children:[(0,d.jsxs)(j.CardHeader,{children:[(0,d.jsxs)(j.CardTitle,{className:"flex items-center gap-2",children:[(0,d.jsx)(r.Heart,{className:"w-5 h-5 text-red-500"}),"Your Donation History"]}),(0,d.jsxs)(j.CardDescription,{children:["Total donated: $",R.toFixed(2)]})]}),(0,d.jsx)(j.CardContent,{children:J?(0,d.jsx)("p",{className:"text-gray-500",children:"Loading donations..."}):0===H.length?(0,d.jsx)("p",{className:"text-gray-500",children:"No donations yet. Thank you for considering supporting our mission!"}):(0,d.jsx)("div",{className:"space-y-3",children:H.map(a=>(0,d.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("p",{className:"font-semibold text-[#315E47]",children:["$",Number(a.amount).toFixed(2)]}),(0,d.jsx)("p",{className:"text-sm text-gray-600",children:new Date(a.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),(0,d.jsx)(k.Badge,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Completed"})]},a.id))})})]})]})}),(0,d.jsx)(n.default,{})]})}[g,h,i,j,k,m,v,x]=y.then?(await y)():y,a.s(["default",()=>z]),c()}catch(a){c(a)}},!1),79532,a=>a.a(async(b,c)=>{try{var d=a.i(79168),e=a.i(27068),f=a.i(32759),g=a.i(39141),h=a.i(68695),i=a.i(93330),j=a.i(9193),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/Profile",pathname:"/Profile",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/Profile",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__5a88d039._.js.map